<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Carrito de Compras</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            padding: 30px;
        }

        h1 {
            text-align: center;
        }

        .contenedor {
            background: white;
            padding: 20px;
            max-width: 500px;
            margin: auto;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        ul {
            list-style: none;
            padding: 0;
        }

        li {
            background: #eee;
            margin: 8px 0;
            padding: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 5px;
        }

        .acciones button {
            margin-left: 5px;
        }

        button {
            cursor: pointer;
            padding: 6px 10px;
        }

        #regresar {
            margin-bottom: 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<div class="contenedor">
    <h1>Carrito de Compras</h1>

    <!-- Bot√≥n para regresar al men√∫ -->
    

    <ul id="listaCarrito"></ul>

    <button onclick="finalizarCompra()">Finalizar Compra</button>
    <button id="regresar" onclick="window.location.href='menu.html'">Volver al Men√∫</button>
</div>

<script>
// üì¶ Leer carrito desde localStorage
let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
let inventario = JSON.parse(localStorage.getItem("inventario")) || [];

const lista = document.getElementById("listaCarrito");

// Render del carrito
function renderCarrito() {
    lista.innerHTML = "";

    carrito.forEach((item, index) => {
        const li = document.createElement("li");

        const span = document.createElement("span");
        span.textContent = `${item.nombre} $${item.precio} | Cantidad: ${item.cantidadSeleccionada || 1} | Stock: ${item.cantidad}`;

        const div = document.createElement("div");
        div.className = "acciones";

        // Editar cantidad
        const btnEditar = document.createElement("button");
        btnEditar.textContent = "Editar";
        btnEditar.onclick = () => editarCantidad(index);

        // Eliminar del carrito
        const btnEliminar = document.createElement("button");
        btnEliminar.textContent = "Eliminar";
        btnEliminar.onclick = () => eliminarProducto(index);

        div.appendChild(btnEditar);
        div.appendChild(btnEliminar);

        li.appendChild(span);
        li.appendChild(div);

        lista.appendChild(li);
    });

    localStorage.setItem("carrito", JSON.stringify(carrito));
}

// Editar cantidad de productos a comprar
function editarCantidad(index) {
    const item = carrito[index];
    const cantidadActual = item.cantidadSeleccionada || 1;

    const nuevaCantidad = parseInt(prompt("Cantidad a comprar:", cantidadActual));

    if (!isNaN(nuevaCantidad) && nuevaCantidad > 0) {
        if (nuevaCantidad > item.cantidad) {
            alert("‚ùå No hay suficiente stock disponible.");
            return;
        }
        item.cantidadSeleccionada = nuevaCantidad;
        renderCarrito();
    }
}

// Eliminar producto del carrito
function eliminarProducto(index) {
    carrito.splice(index, 1);
    renderCarrito();
}

// Finalizar compra
function finalizarCompra() {
    if (carrito.length === 0) {
        alert("‚ùå El carrito est√° vac√≠o.");
        return;
    }

    // Guardar carrito en localStorage para usar en venta.html
    localStorage.setItem("carrito", JSON.stringify(carrito));

    // Redirigir a ventana de ventas
    window.location.href = "venta.html";
}

// Render inicial
renderCarrito();
</script>

</body>
</html>
